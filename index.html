<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trivial Grid</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 24px;
      color: #111827;
    }

    .container {
      max-width: 720px;
      width: 100%;
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header {
      text-align: center;
      margin-bottom: 24px;
    }

    h1 {
      font-size: 2.2rem;
      font-weight: 800;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .subtitle {
      color: #6b7280;
      font-size: 1rem;
      font-weight: 500;
    }

    .game-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 24px;
      padding: 32px;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      width: 100%;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .stats {
      display: flex;
      justify-content: flex-end;
      gap: 32px;
      margin-bottom: 24px;
    }

    .stat {
      text-align: right;
    }

    .stat-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .stat-value {
      font-size: 1.4rem;
      font-weight: 800;
      color: #111827;
    }

    .grid {
      display: grid;
      grid-template-columns: 120px 1fr 1fr 1fr;
      grid-auto-rows: 80px;
      gap: 12px;
      margin-bottom: 24px;
    }

    .category-label {
      font-size: 0.75rem;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      display: flex;
      align-items: flex-start;
      padding-top: 12px;
      font-weight: 700;
      writing-mode: vertical-rl;
      text-orientation: mixed;
    }

    .question-cell {
      grid-column: 2 / span 3;
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      border-radius: 16px;
      padding: 16px;
      font-size: 0.9rem;
      line-height: 1.4;
      display: flex;
      align-items: center;
      border: 2px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: 500;
      position: relative;
      overflow: hidden;
    }

    .question-cell::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    .question-cell:hover::before {
      opacity: 1;
    }

    .question-cell.option-0:hover {
      border-color: #10b981;
    }

    .cell {
      border-radius: 16px;
      border: 2px solid #e2e8f0;
      background: #ffffff;
      font-size: 0.85rem;
      padding: 12px 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: 500;
      line-height: 1.3;
    }

    .cell:hover:not(.correct):not(.incorrect):not(.locked) {
      border-color: #6366f1;
      background: linear-gradient(135deg, #eef2ff 0%, #e0e7ff 100%);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(99, 102, 241, 0.15);
    }

    .cell.correct,
    .question-cell.correct {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white !important;
      border-color: #10b981;
      cursor: default;
      transform: scale(1.02);
    }

    .cell.incorrect,
    .question-cell.incorrect {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      color: white !important;
      border-color: #ef4444;
    }

    .cell.locked,
    .question-cell.locked {
      cursor: default;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-4px); }
      75% { transform: translateX(4px); }
    }

    .shake {
      animation: shake 0.3s ease-in-out;
    }

    .reset-btn {
      width: 100%;
      padding: 16px;
      border: 2px solid transparent;
      border-radius: 16px;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s ease;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .reset-btn:hover {
      background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
      transform: translateY(-2px);
      box-shadow: 0 12px 30px rgba(102, 126, 234, 0.4);
    }

    footer {
      width: 100%;
      max-width: 720px;
      text-align: center;
      color: #9ca3af;
      padding: 20px;
      font-size: 0.8rem;
      margin-top: 20px;
    }

    @media (max-width: 768px) {
      .grid {
        grid-template-columns: 100px 1fr 1fr 1fr;
        grid-auto-rows: 70px;
        gap: 8px;
      }
      
      .category-label {
        font-size: 0.7rem;
        padding-top: 8px;
      }
      
      .question-cell,
      .cell {
        font-size: 0.8rem;
        padding: 12px 8px;
      }
      
      .game-card {
        padding: 24px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Trivial Grid</h1>
      <div class="subtitle">Cultura general espaÃ±ola</div>
    </header>

    <div class="game-card">
      <div class="stats">
        <div class="stat">
          <div class="stat-label">Intentos</div>
          <div class="stat-value" id="attempts">0</div>
        </div>
        <div class="stat">
          <div class="stat-label">Progreso</div>
          <div class="stat-value" id="progress">0/6</div>
        </div>
      </div>

      <div class="grid" id="grid"></div>
      <button class="reset-btn" onclick="resetGame()">Nueva Partida</button>
    </div>
  </div>

  <footer>
    <p><strong>VersiÃ³n Beta</strong> Â· No se recopilan datos personales</p>
    <p>Â© 2025 Trivial Grid Â· Licencia MIT</p>
  </footer>

  <script>
    // Base de datos de preguntas (3 opciones por pregunta)
    const trivialQuestions = {
      'GeografÃ­a': [
        { q: 'Â¿CuÃ¡l es la capital de EspaÃ±a?', options: ['Barcelona', 'Madrid', 'Valencia'], correct: 1 },
        { q: 'Â¿QuÃ© rÃ­o pasa por Zaragoza?', options: ['Tajo', 'Ebro', 'Guadalquivir'], correct: 1 },
        { q: 'Â¿CuÃ¡ntas comunidades autÃ³nomas?', options: ['15', '17', '19'], correct: 1 }
      ],
      'Entretenimiento': [
        { q: 'Â¿QuiÃ©n dirigiÃ³ "El Laberinto del Fauno"?', options: ['AlmodÃ³var', 'Del Toro', 'AmenÃ¡bar'], correct: 1 },
        { q: 'Â¿QuiÃ©n cantÃ³ "MediterrÃ¡neo"?', options: ['Sabina', 'Serrat', 'Aute'], correct: 1 }
      ],
      'Historia': [
        { q: 'Â¿AÃ±o del descubrimiento de AmÃ©rica?', options: ['1492', '1512', '1488'], correct: 0 },
        { q: 'Â¿Fin de la Guerra Civil EspaÃ±ola?', options: ['1939', '1936', '1945'], correct: 0 }
      ],
      'Arte y Literatura': [
        { q: 'Â¿Autor de "Don Quijote"?', options: ['Cervantes', 'Lope de Vega', 'VelÃ¡zquez'], correct: 0 },
        { q: 'Â¿Pintor de "Las Meninas"?', options: ['Goya', 'VelÃ¡zquez', 'El Greco'], correct: 1 }
      ],
      'Ciencias y Naturaleza': [
        { q: 'Â¿Planeta mÃ¡s grande?', options: ['JÃºpiter', 'Saturno', 'Neptuno'], correct: 0 },
        { q: 'Â¿Huesos en cuerpo humano adulto?', options: ['206', '180', '230'], correct: 0 }
      ],
      'Deportes y Pasatiempos': [
        { q: 'Â¿AÃ±o del Mundial de EspaÃ±a?', options: ['2010', '2006', '2014'], correct: 0 },
        { q: 'Â¿Tenista con mÃ¡s Grand Slams?', options: ['Nadal', 'Alcaraz', 'Ferrer'], correct: 0 }
      ]
    };

    const categories = Object.keys(trivialQuestions);
    let gameState = {
      attempts: 0,
      correctAnswers: new Set(),
      currentRound: {}
    };

    function initGrid() {
      const grid = document.getElementById('grid');
      grid.innerHTML = '';

      categories.forEach((cat, catIndex) => {
        // Columna 1: Nombre categorÃ­a (vertical)
        const label = document.createElement('div');
        label.className = 'category-label';
        label.textContent = cat;
        grid.appendChild(label);

        // Columna 2: Pregunta + OpciÃ³n 0 (clickeable)
        const qCell = document.createElement('div');
        qCell.className = 'question-cell option-0';
        qCell.dataset.category = catIndex;
        qCell.dataset.option = 0;
        qCell.id = `question-${catIndex}`;
        grid.appendChild(qCell);

        // Columnas 3 y 4: Opciones 1 y 2
        for (let i = 1; i < 3; i++) {
          const cell = document.createElement('div');
          cell.className = 'cell';
          cell.dataset.category = catIndex;
          cell.dataset.option = i;
          grid.appendChild(cell);
        }
      });

      startNewRound();
      renderGrid();
      attachEventListeners();
      updateStats();
    }

    function startNewRound() {
      gameState.currentRound = {};
      categories.forEach((cat, catIndex) => {
        if (!gameState.correctAnswers.has(catIndex)) {
          const questions = trivialQuestions[cat];
          const randomQ = questions[Math.floor(Math.random() * questions.length)];
          gameState.currentRound[catIndex] = randomQ;
        }
      });
    }

    function renderGrid() {
      categories.forEach((cat, catIndex) => {
        const questionData = gameState.currentRound[catIndex];
        const qCell = document.getElementById(`question-${catIndex}`);
        const cells = document.querySelectorAll(`[data-category="${catIndex}"].cell`);

        if (gameState.correctAnswers.has(catIndex)) {
          qCell.className = 'question-cell correct locked';
          qCell.textContent = 'âœ… Completada';
          cells.forEach(cell => {
            cell.className = 'cell correct locked';
            cell.textContent = 'âœ“';
          });
          return;
        }

        // Pregunta activa
        qCell.className = 'question-cell option-0';
        qCell.textContent = questionData.options[0];
        cells[0].textContent = questionData.options[1];
        cells[1].textContent = questionData.options[2];
      });
    }

    function attachEventListeners() {
      document.querySelectorAll('[data-category]').forEach(cell => {
        cell.onclick = function() {
          const catIndex = parseInt(this.dataset.category);
          const optIndex = parseInt(this.dataset.option);
          handleAnswer(catIndex, optIndex, this);
        };
      });
    }

    function handleAnswer(catIndex, optionIndex, clickedElement) {
      if (gameState.correctAnswers.has(catIndex)) return;

      const questionData = gameState.currentRound[catIndex];
      const correctIndex = questionData.correct;

      gameState.attempts++;
      updateStats();

      const qCell = document.getElementById(`question-${catIndex}`);
      const allCells = document.querySelectorAll(`[data-category="${catIndex}"]`);

      if (optionIndex === correctIndex) {
        // Â¡Correcto!
        gameState.correctAnswers.add(catIndex);
        
        allCells.forEach(cell => {
          cell.classList.add('correct', 'locked');
        });
        
        qCell.textContent = 'âœ… Â¡Correcto!';
        
        if (gameState.correctAnswers.size === categories.length) {
          setTimeout(() => {
            alert(`ðŸŽ‰ Â¡TRIVIAL COMPLETADO!\n\nIntentos totales: ${gameState.attempts}\n\nÂ¡Enhorabuena!`);
          }, 500);
        }
      } else {
        // Incorrecto
        clickedElement.classList.add('incorrect', 'shake');
        setTimeout(() => {
          clickedElement.classList.remove('shake');
        }, 300);
      }
    }

    function updateStats() {
      document.getElementById('attempts').textContent = gameState.attempts;
      document.getElementById('progress').textContent = 
        `${gameState.correctAnswers.size}/${categories.length}`;
    }

    function resetGame() {
      gameState = {
        attempts: 0,
        correctAnswers: new Set(),
        currentRound: {}
      };
      initGrid();
    }

    // Inicializar
    initGrid();
  </script>
</body>
</html>
