<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trivial Grid</title>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: #f5f5f5;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    padding: 20px;
    color: #333;
}

.container {
    max-width: 700px;
    width: 100%;
}

h1 {
    text-align: center;
    font-size: 2.4rem;
    margin-bottom: 25px;
    color: #000;
}

.stats {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-bottom: 30px;
}

.stat {
    text-align: center;
}

.stat-label {
    font-size: 0.75rem;
    color: #666;
    text-transform: uppercase;
}

.stat-value {
    font-size: 1.4rem;
    font-weight: 700;
}

.game-card {
    background: white;
    padding: 30px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.grid {
    display: grid;
    grid-template-columns: auto repeat(3, 1fr);
    gap: 10px;
}

.category-label {
    grid-column: span 4;
    font-size: 0.8rem;
    font-weight: 700;
    text-transform: uppercase;
    color: #666;
    margin-top: 20px;
}

.question-inline {
    grid-column: span 4;
    font-size: 1.1rem;
    font-weight: 600;
    color: #000;
    margin: 10px 0 15px;
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.4s ease, transform 0.4s ease;
}

.question-inline.exit {
    opacity: 0;
    transform: translateY(-10px);
}

.question-inline.enter {
    opacity: 0;
    transform: translateY(10px);
}

.cell {
    aspect-ratio: 1;
    border: 2px solid #e5e5e5;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px;
    text-align: center;
    font-size: 0.95rem;
    cursor: pointer;
    transition: border-color 0.25s ease;
    background: white;
}

.cell:hover {
    border-color: #000;
}

.cell.correct {
    border-color: #2ecc71;
}

.cell.incorrect {
    border-color: #e74c3c;
}

.cell.locked {
    pointer-events: none;
    cursor: default;
}

footer {
    text-align: center;
    margin-top: 25px;
    font-size: 0.85rem;
    color: #666;
}
</style>
</head>

<body>

<div class="container">
    <h1>Trivial Grid</h1>

    <div class="stats">
        <div class="stat">
            <div class="stat-label">Intentos</div>
            <div class="stat-value" id="attempts">0</div>
        </div>
        <div class="stat">
            <div class="stat-label">Progreso</div>
            <div class="stat-value" id="progress">0/6</div>
        </div>
    </div>

    <div class="game-card">
        <div class="grid" id="grid"></div>
    </div>

    <footer>
        <p>Versión Beta · © 2025 · Licencia MIT</p>
    </footer>
</div>

<script src="questions.js"></script>

<script>
const categories = [
    'Geografía',
    'Entretenimiento',
    'Historia',
    'Arte y Literatura',
    'Ciencias y Naturaleza',
    'Deportes y Pasatiempos'
];

let gameState = {
    attempts: 0,
    correctAnswers: new Set(),
    currentRound: {},
    currentCategory: 0
};

function initGrid() {
    const grid = document.getElementById('grid');
    grid.innerHTML = '';

    categories.forEach((cat, index) => {
        const label = document.createElement('div');
        label.className = 'category-label';
        label.textContent = cat;
        grid.appendChild(label);

        const question = document.createElement('div');
        question.className = 'question-inline';
        question.id = `question-${index}`;
        grid.appendChild(question);

        for (let i = 0; i < 3; i++) {
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.dataset.category = index;
            cell.onclick = () => checkAnswer(index, i);
            grid.appendChild(cell);
        }
    });

    startNewRound();
    renderCurrentQuestion();
}

function startNewRound() {
    gameState.currentRound = {};
    categories.forEach((cat, i) => {
        const qs = trivialQuestions[cat];
        gameState.currentRound[i] =
            qs[Math.floor(Math.random() * qs.length)];
    });
}

function renderCurrentQuestion() {
    const i = gameState.currentCategory;
    if (i >= categories.length) return;

    const qEl = document.getElementById(`question-${i}`);
    const qData = gameState.currentRound[i];

    qEl.classList.add('enter');
    qEl.textContent = qData.q;

    requestAnimationFrame(() => {
        qEl.classList.remove('enter');
    });

    const cells = document.querySelectorAll(`[data-category="${i}"]`);
    cells.forEach((cell, idx) => {
        cell.textContent = qData.options[idx];
    });
}

function checkAnswer(catIndex, selected) {
    if (catIndex !== gameState.currentCategory) return;

    const qData = gameState.currentRound[catIndex];
    const cells = document.querySelectorAll(`[data-category="${catIndex}"]`);
    const qEl = document.getElementById(`question-${catIndex}`);

    gameState.attempts++;
    updateStats();

    cells.forEach((cell, i) => {
        cell.classList.add('locked');
        if (i === qData.correct) cell.classList.add('correct');
        if (i === selected && selected !== qData.correct) cell.classList.add('incorrect');
    });

    qEl.classList.add('exit');

    setTimeout(() => {
        gameState.currentCategory++;
        renderCurrentQuestion();
    }, 500);
}

function updateStats() {
    document.getElementById('attempts').textContent = gameState.attempts;
    document.getElementById('progress').textContent =
        `${gameState.correctAnswers.size}/${categories.length}`;
}

initGrid();
</script>

</body>
</html>
